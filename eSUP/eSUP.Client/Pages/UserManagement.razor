@page "/users/management"
@rendermode @(new InteractiveWebAssemblyRenderMode(false))

@using Microsoft.AspNetCore.Authorization
@using MudBlazor

@attribute [Authorize(Roles = "Admin")]

<MudPaper Class="p-4">
    <MudText Typo="Typo.h5">User Management</MudText>
    <MudDataGrid Items="vm.Users" Bordered="true" Dense Hover>
        <Columns>
            <PropertyColumn Property="x => x.UserId" Title="ID" Hidden="true" />
            <PropertyColumn Property="x => x.FirstName" Title="First Name" />
            <PropertyColumn Property="x => x.LastName" Title="Last Name" />
            <PropertyColumn Property="x => x.Email" Title="eMail" />
            <PropertyColumn Property="x => x.Role" Title="Role" />
            <TemplateColumn>
                <CellTemplate>
                    <MudButton Color=Color.Primary Variant=Variant.Filled Size=Size.Small OnClick="() => vm.UpgradeRoleAsync(context.Item)">Upgrade</MudButton>
                </CellTemplate>
            </TemplateColumn>
        </Columns>
    </MudDataGrid>
</MudPaper>
