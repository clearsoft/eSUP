@page "/edit-planner/{plannerid}"
@rendermode @(new InteractiveWebAssemblyRenderMode(false))

@using MudBlazor
@using eSUP.Client.Components
@using eSUP.Client.ViewModels
@using eSUP.DTO

@inject IDialogService dialogService

<MudDialogProvider />
<MudGrid>
    <MudItem xs="11">
        <InputText @bind-Value=@vm.Planner!.Title/>
    </MudItem>
    <MudButton Variant=Variant.Filled Color="Color.Success" OnClick="UpdatePlanner">Save Planner</MudButton>
</MudGrid>
<MudDataGrid Items=@vm.Planner!.Exercises Dense>
    <Columns>
        <HierarchyColumn T="ExerciseDto" IconSize="Size.Small" />
        <TemplateColumn>
            <CellTemplate>
                <ExerciseBlock Exercise=@context.Item OnLevelChange="RefreshUI" />
            </CellTemplate>
        </TemplateColumn>
    </Columns>
    <ChildRowContent>
        @foreach (var question in context.Item.Questions)
        {
            <QuestionBlock Item=@question Parent=@context.Item OnPartChange="RecordChange" />
        }
    </ChildRowContent>
</MudDataGrid>




