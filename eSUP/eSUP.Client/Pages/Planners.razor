@page "/planners"
@rendermode @(new InteractiveWebAssemblyRenderMode(false))

@using MudBlazor

<MudDialogProvider />
<MudPopoverProvider />
    <MudDataGrid Items="vm.AvailablePlanners" Bordered="true" Dense Hover>
        <Columns>
            <PropertyColumn Property="x => x.Id" Title="ID" Hidden="true" />
            <PropertyColumn Property="x => x.Title" Title="Title" />
            <TemplateColumn CellStyle="width:100px;">
                <CellTemplate>
                    <MudStack Row Style="height:30px;">
                        @if (canManagePlanners)
                        {
                            <MudButton Color=Color.Primary Variant=Variant.Filled Size=Size.Medium OnClick="() => EditPlanner(context.Item)">Edit</MudButton>
                            <MudButton Color=Color.Secondary Variant=Variant.Filled Size=Size.Medium OnClick="() => DeletePlanner(context.Item)">Delete</MudButton>
                            <MudButton Color=Color.Tertiary Variant=Variant.Filled Size=Size.Medium OnClick="() => AssignPlanner(context.Item)">Assign</MudButton>
                            <MudButton Color=Color.Tertiary Variant=Variant.Filled Size=Size.Medium OnClick="() => ShowProgress(context.Item)">Progress</MudButton>
                        }
                        else
                        {
                            <MudButton Color=Color.Tertiary Variant=Variant.Filled Size=Size.Small OnClick="() => OpenPlanner(context.Item)">Open</MudButton>
                        }
                    </MudStack>
                </CellTemplate>
            </TemplateColumn>
        </Columns>
    </MudDataGrid>
@if (canManagePlanners)
{
    <hr/>
    <MudButton Variant=Variant.Filled Color="Color.Primary" OnClick="GoToCreate">Create New Planner</MudButton>
}